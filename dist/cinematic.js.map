{"version":3,"file":"cinematic.js","sourceRoot":"","sources":["../lib/cinematic.ts"],"names":[],"mappings":"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","sourcesContent":["interface Document {\n    webkitExitFullscreen: any;\n    webkitFullscreenElement: any;\n    webkitFullscreenEnabled: any;\n    pictureInPictureElement: any;\n    exitPictureInPicture: () => Promise<void>;\n}\n\ninterface HTMLVideoElement {\n    webkitEnterFullscreen: any;\n    webkitSupportsFullscreen: any;\n    requestPictureInPicture: () => Promise<PictureInPictureWindow>;\n}\n\ninterface Options {\n    selector: string;\n    baseUri: string;\n    autoplay: boolean;\n    startTime: number;\n    deeplink: string;\n    deeplinkCallback?: Function\n    rememberVolume: boolean;\n    rememberQuality: boolean;\n    quality: string;\n    sources: VideoQuality[];\n    video: CinematicVideo | null;\n    playlist: CinematicPlaylist | null;\n    closeCallback?: CloseCallback;\n    translations: Translations;\n}\n\ninterface VideoOptions {\n    poster: string;\n    titleIcon: string;\n    title: string;\n    description: string;\n    subtitles: string;\n    sources: VideoQuality[];\n}\n\ninterface CloseCallback {\n    (): void;\n}\n\ninterface VideoQuality {\n    quality: string;\n    sources: VideoSource[];\n}\n\ninterface VideoSource {\n    type: string;\n    source: string;\n}\n\ninterface Translations {\n    pause: string;\n    play: string;\n    restart: string;\n    mute: string;\n    unmute: string;\n    settings: string;\n    quality: string;\n    playbackSpeed: string;\n    fullscreen: string;\n    deeplink: string;\n    close: string;\n    deeplinkCopied: string;\n    exitFullscreen: string;\n    showSubtitles: string;\n    hideSubtitles: string;\n    pictureInPicture: string;\n    chromecast: string;\n    showVideoInfo: string;\n    hideVideoInfo: string;\n}\n\nclass Cinematic {\n\n    options: Options;\n\n    defaults: Options = {\n        selector: '',\n        baseUri: '../dist',\n        autoplay: false,\n        startTime: 0,\n        deeplink: '',\n        rememberVolume: false,\n        rememberQuality: false,\n        quality: '720p',\n        sources: [],\n        video: null,\n        playlist: null,\n        translations: {\n            pause: 'Pause',\n            play: 'Play',\n            restart: 'Restart',\n            mute: 'Mute',\n            unmute: 'Unmute',\n            settings: 'Settings',\n            quality: 'Quality',\n            playbackSpeed: 'Speed',\n            fullscreen: 'Fullscreen',\n            close: 'Close',\n            deeplink: 'Copy deeplink to clipboard',\n            deeplinkCopied: 'Link was copied',\n            exitFullscreen: 'Exit Fullscreen',\n            showSubtitles: 'Show Subtitles',\n            hideSubtitles: 'Hide Subtitles',\n            pictureInPicture: 'Picture in picture',\n            chromecast: 'Stream',\n            showVideoInfo: 'Show video information',\n            hideVideoInfo: 'Hide video information'\n        }\n    };\n\n    _container: any;\n    _video: HTMLVideoElement;\n    _sources: Map<string, HTMLSourceElement> = new Map<string, HTMLSourceElement>();\n    _cues: HTMLElement;\n    _cuesContainer: HTMLElement;\n    _uiWrapper: HTMLDivElement;\n    _videoTitleIcon: HTMLImageElement;\n    _videoTitle: HTMLDivElement;\n    _videoInfoButton: HTMLDivElement;\n    _videoDescription: HTMLDivElement;\n    _controls: HTMLElement;\n    _playButton: HTMLDivElement;\n    _bufferBar: HTMLProgressElement;\n    _progressBar: HTMLProgressElement;\n    _timer: HTMLElement;\n    _volumeSlider: HTMLInputElement;\n    _volumeButton: HTMLDivElement;\n    _settingsWrapper: HTMLDivElement;\n    _settingsButton: HTMLDivElement;\n    _qualitySelect: HTMLSelectElement;\n    _qualitySettingsSection: HTMLDivElement;\n    _captionsButton: HTMLDivElement;\n    _deeplinkButton: HTMLDivElement;\n    _pipButton: HTMLDivElement;\n    _chromecastButton: HTMLDivElement;\n    _fullScreenButton: HTMLDivElement;\n    _closeButton: HTMLDivElement;\n    _overlayWrapper: HTMLDivElement;\n    _overlayIcon: HTMLDivElement;\n    _overlayText: HTMLDivElement;\n\n    totalSeconds = 0;\n    playedSeconds = 0;\n    volume = 0;\n    quality = '';\n    speed = 1;\n    tracks: TextTrack | null;\n    cues: TextTrackCueList | null;\n    playlist: CinematicPlaylist;\n\n    captionsEnabled = false;\n    fullScreenEnabled = false;\n    pipEnabled = false;\n    userActive = false;\n    userActiveCheck: number;\n    userInactiveTimeout: number;\n    overlayHideTimeout: number;\n    doubleClickTimeout: number;\n\n    constructor(options: Options) {\n        this.options = {...this.defaults, ...options};\n\n        const _passedContainer = document.querySelector(this.options.selector);\n        if (!_passedContainer) {\n            throw new Error('CinematicJS: Passed selector does not point to a DOM element.');\n        }\n        this._container = _passedContainer;\n\n        if (this.options.playlist) {\n            this.playlist = this.options.playlist;\n        } else if (this.options.video) {\n            this.playlist = new CinematicPlaylist(false, [this.options.video]);\n        } else {\n            throw new Error('CinematicJS: Either a single `video` or a `playlist` has to be passed as options.');\n        }\n\n        this.filterPlayableSources();\n\n        this.quality = this.options.quality;\n        if (this.options.rememberQuality) {\n            const storedQuality = this.readFromLocalStore('quality');\n            if (storedQuality) {\n                this.quality = this.handleVideoQualityFallback(storedQuality);\n            }\n        }\n\n        if ('pictureInPictureEnabled' in document) {\n            this.pipEnabled = true;\n        }\n\n        this.loadIcons();\n        this.renderPlayer();\n        this.updateDisplayedVideoInfo();\n        this.setupEvents();\n\n        this._video.load();\n\n        if (this.options.rememberVolume) {\n            const storedVolume = this.readFromLocalStore('volume');\n            if (storedVolume) {\n                this._video.volume = Number.parseFloat(storedVolume);\n            }\n            const storedMuteState = this.readFromLocalStore('muted');\n            if (storedMuteState) {\n                this._video.muted = storedMuteState === 'true';\n            }\n        }\n\n        this._container.cinematic = this as Cinematic;\n    }\n\n    filterPlayableSources() {\n        const _video = document.createElement('video');\n        for (const video of this.playlist.videos) {\n            // Only keep qualities with at least one playable source\n            video.sources = video.sources.filter(source => {\n                // Only keep sources that may be playable by the browser\n                source.sources = source.sources.filter(source => {\n                    return _video.canPlayType(source.type) !== '';\n                });\n                return source.sources.length > 0;\n            });\n        }\n    }\n\n    loadIcons() {\n        const _iconContainer = document.createElement('span');\n        _iconContainer.classList.add('cinematicjs-icon-container');\n        document.body.appendChild(_iconContainer);\n\n        const request = new XMLHttpRequest();\n        request.open(\"GET\", this.options.baseUri + '/icons.svg', true);\n        request.responseType = \"document\";\n        request.onload = () => {\n            const svg = request?.responseXML?.documentElement;\n            // Don't render anything that is not an SVG, e.g. an HTML error page\n            if (svg && svg.nodeName === 'svg') {\n                _iconContainer.appendChild(svg);\n            }\n        }\n        request.send();\n    }\n\n    renderPlayer() {\n        this._container.classList.add('cinematicjs-video-container');\n        this._container.setAttribute('role', 'region');\n        this._container.setAttribute('aria-label', 'Video player');\n\n        let initialVideo = this.playlist.getCurrentVideo();\n\n        this._video = document.createElement('video');\n        this._video.preload = 'metadata';\n        this._video.tabIndex = 0;\n        this._video.playsInline = true;\n        this._video.setAttribute('aria-label', 'Video player');\n        // Suppress the unwanted right-click context menu of the video element itself\n        this._video.oncontextmenu = () => false;\n        if (this.options.autoplay) {\n            this._video.autoplay = true;\n        }\n        this._container.appendChild(this._video);\n\n        let startSource = initialVideo.getSourcesForQuality(this.quality);\n\n        if (!startSource) {\n            throw new Error('CinematicJS: Passed quality does not match any of the passed sources.');\n        }\n\n        this.updateVideoSourceElements(startSource.sources);\n\n        this._overlayWrapper = document.createElement('div');\n        this._overlayWrapper.classList.add('cinematicjs-video-overlay-wrapper', 'cinematicjs-hidden');\n        this._container.appendChild(this._overlayWrapper);\n\n        const _overlayContainer = document.createElement('div');\n        _overlayContainer.classList.add('cinematicjs-video-overlay-container');\n        this._overlayWrapper.appendChild(_overlayContainer);\n\n        this._overlayIcon = document.createElement('div');\n        this._overlayIcon.classList.add('cinematicjs-video-overlay-icon');\n        Cinematic.renderButtonIcon(this._overlayIcon, 'mute');\n        _overlayContainer.appendChild(this._overlayIcon);\n\n        this._overlayText = document.createElement('div');\n        this._overlayText.classList.add('cinematicjs-video-overlay-text');\n        _overlayContainer.appendChild(this._overlayText);\n\n        this._uiWrapper = document.createElement('div');\n        this._uiWrapper.classList.add('cinematicjs-ui-wrapper');\n        this._container.appendChild(this._uiWrapper);\n\n        const _header = document.createElement('div');\n        _header.classList.add('cinematicjs-video-header');\n        this._uiWrapper.appendChild(_header);\n\n        this._videoTitleIcon = document.createElement('img');\n        this._videoTitleIcon.classList.add('cinematicjs-video-icon');\n        _header.appendChild(this._videoTitleIcon);\n\n        this._videoTitle = document.createElement('div');\n        this._videoTitle.classList.add('cinematicjs-video-title');\n        this._videoTitle.addEventListener('click', () => this.handleVideoInfoToggle());\n        _header.appendChild(this._videoTitle);\n\n        this._videoInfoButton = document.createElement('div');\n        this._videoInfoButton.classList.add('cinematicjs-video-info-button');\n        this._videoInfoButton.setAttribute('role', 'button');\n        this._videoInfoButton.setAttribute('tabindex', '0');\n        this._videoInfoButton.setAttribute('aria-label', this.options.translations.showVideoInfo);\n        this._videoInfoButton.setAttribute('aria-expanded', 'false');\n        this._videoInfoButton.title = this.options.translations.showVideoInfo;\n        Cinematic.renderButtonIcon(this._videoInfoButton, 'info');\n        _header.appendChild(this._videoInfoButton);\n\n        const _headerSpacer = document.createElement('div');\n        _headerSpacer.classList.add('cinematicjs-video-header-spacer');\n        _header.appendChild(_headerSpacer);\n\n        this._chromecastButton = document.createElement('div');\n        this._chromecastButton.classList.add('cinematicjs-video-control-button', 'cinematicjs-hidden');\n        this._chromecastButton.setAttribute('role', 'button');\n        this._chromecastButton.setAttribute('tabindex', '0');\n        this._chromecastButton.setAttribute('aria-label', this.options.translations.chromecast);\n        this._chromecastButton.title = this.options.translations.chromecast;\n        Cinematic.renderButtonIcon(this._chromecastButton, 'chromecast');\n        _header.appendChild(this._chromecastButton);\n\n        if (this._video.remote) {\n            this._video.remote.watchAvailability((available) => {\n                this._chromecastButton.classList.toggle('cinematicjs-hidden', !available);\n            }).catch(() => {\n                this._chromecastButton.classList.add('cinematicjs-hidden');\n            });\n        }\n\n        if (this.options.closeCallback) {\n            this._closeButton = document.createElement('div');\n            this._closeButton.classList.add('cinematicjs-video-close-button');\n            this._closeButton.setAttribute('role', 'button');\n            this._closeButton.setAttribute('tabindex', '0');\n            this._closeButton.setAttribute('aria-label', this.options.translations.close);\n            this._closeButton.title = this.options.translations.close;\n            Cinematic.renderButtonIcon(this._closeButton, 'close');\n            _header.appendChild(this._closeButton);\n        }\n\n        this._videoDescription = document.createElement('div');\n        this._videoDescription.classList.add('cinematicjs-video-description', 'cinematicjs-hidden');\n        this._uiWrapper.appendChild(this._videoDescription);\n\n        const _footer = document.createElement('div');\n        _footer.classList.add('cinematicjs-video-footer');\n        this._uiWrapper.appendChild(_footer);\n\n        const _progressWrapper = document.createElement('div');\n        _progressWrapper.classList.add('cinematicjs-video-progress-wrapper');\n        _footer.appendChild(_progressWrapper);\n\n        this._bufferBar = document.createElement('progress');\n        this._bufferBar.classList.add('cinematicjs-video-buffer-bar');\n        this._bufferBar.value = 0;\n        _progressWrapper.appendChild(this._bufferBar);\n\n        this._progressBar = document.createElement('progress');\n        this._progressBar.classList.add('cinematicjs-video-progress-bar');\n        this._progressBar.setAttribute('role', 'slider');\n        this._progressBar.setAttribute('aria-label', 'Video progress');\n        this._progressBar.setAttribute('aria-valuemin', '0');\n        this._progressBar.setAttribute('aria-valuemax', '100');\n        this._progressBar.setAttribute('aria-valuenow', '0');\n        this._progressBar.setAttribute('tabindex', '0');\n        this._progressBar.value = 0;\n        _progressWrapper.appendChild(this._progressBar);\n\n        this._controls = document.createElement('div');\n        this._controls.classList.add('cinematicjs-video-controls');\n        _footer.appendChild(this._controls);\n\n        this._playButton = document.createElement('div');\n        this._playButton.classList.add('cinematicjs-video-control-button');\n        this._playButton.setAttribute('role', 'button');\n        this._playButton.setAttribute('tabindex', '0');\n        this._playButton.setAttribute('aria-label', this.options.translations.play);\n        Cinematic.renderButtonIcon(this._playButton, 'play');\n        this._controls.appendChild(this._playButton);\n\n        this._timer = document.createElement('span');\n        this._timer.classList.add('cinematicjs-video-control-timer');\n        this._timer.textContent = '00:00:00 / 00:00:00';\n        this._controls.appendChild(this._timer);\n\n        const _spacer = document.createElement('div');\n        _spacer.classList.add('video-control-spacer');\n        this._controls.appendChild(_spacer);\n\n        const _volumeWrapper = document.createElement('div');\n        _volumeWrapper.classList.add('cinematicjs-video-volume-wrapper');\n        this._controls.appendChild(_volumeWrapper);\n\n        this._volumeSlider = document.createElement('input');\n        this._volumeSlider.type = 'range';\n        this._volumeSlider.min = '0';\n        this._volumeSlider.max = '1';\n        this._volumeSlider.step = '0.05';\n        this._volumeSlider.value = '1';\n        this._volumeSlider.setAttribute('aria-label', 'Volume');\n        this._volumeSlider.classList.add('cinematicjs-video-volume-slider');\n        _volumeWrapper.appendChild(this._volumeSlider);\n\n        this._volumeButton = document.createElement('div');\n        this._volumeButton.classList.add('cinematicjs-video-control-button');\n        this._volumeButton.setAttribute('role', 'button');\n        this._volumeButton.setAttribute('tabindex', '0');\n        this._volumeButton.setAttribute('aria-label', this.options.translations.mute);\n        this._volumeButton.title = this.options.translations.mute;\n        Cinematic.renderButtonIcon(this._volumeButton, 'sound');\n        _volumeWrapper.appendChild(this._volumeButton);\n\n        this._settingsWrapper = document.createElement('div');\n        this._settingsWrapper.classList.add('cinematicjs-video-control-dropdown');\n        this._controls.appendChild(this._settingsWrapper);\n\n        this._settingsButton = document.createElement('div');\n        this._settingsButton.classList.add('cinematicjs-video-control-button');\n        this._settingsButton.setAttribute('role', 'button');\n        this._settingsButton.setAttribute('tabindex', '0');\n        this._settingsButton.setAttribute('aria-label', this.options.translations.settings);\n        this._settingsButton.setAttribute('aria-expanded', 'false');\n        this._settingsButton.title = this.options.translations.settings;\n        Cinematic.renderButtonIcon(this._settingsButton, 'settings');\n        this._settingsWrapper.appendChild(this._settingsButton);\n\n        globalThis.addEventListener('click', (event) => {\n            // Clicks inside the Dropdown should not close it again.\n            if (!(event.target instanceof Element) || !(event.target).matches('.cinematicjs-video-control-dropdown, .cinematicjs-video-control-dropdown *')) {\n                this._settingsWrapper.classList.remove('cinematicjs-dropdown-active');\n            }\n        });\n\n        const _dropDownContent = document.createElement('div');\n        _dropDownContent.classList.add('cinematicjs-video-dropdown-content');\n        this._settingsWrapper.appendChild(_dropDownContent);\n\n        this._qualitySettingsSection = document.createElement('div');\n        this._qualitySettingsSection.classList.add('cinematicjs-video-dropdown-section');\n        _dropDownContent.appendChild(this._qualitySettingsSection);\n\n        const _qualitySettingsTitle = document.createElement('span');\n        _qualitySettingsTitle.textContent = this.options.translations.quality;\n        this._qualitySettingsSection.appendChild(_qualitySettingsTitle);\n\n        this._qualitySelect = document.createElement('select');\n        this._qualitySelect.name = 'quality';\n        this._qualitySelect.addEventListener('change', () => this.handleQualityChange(this._qualitySelect.value));\n\n        this.renderQualityOptions();\n\n        this._qualitySettingsSection.appendChild(this._qualitySelect);\n\n        const _speedSettingsSection = document.createElement('div');\n        _speedSettingsSection.classList.add('cinematicjs-video-dropdown-section');\n        _dropDownContent.appendChild(_speedSettingsSection);\n\n        const _speedSettingsTitle = document.createElement('span');\n        _speedSettingsTitle.textContent = this.options.translations.playbackSpeed;\n        _speedSettingsSection.appendChild(_speedSettingsTitle);\n\n        const _speedSelect = document.createElement('select');\n        _speedSelect.name = 'speed';\n        _speedSelect.addEventListener('change', () => this.handleSpeedChange(_speedSelect.value));\n\n        for (const speedSetting of [0.5, 1, 1.25, 1.5, 1.75, 2]) {\n            const _option = document.createElement('option');\n            _option.textContent = speedSetting + 'x';\n            _option.value = speedSetting + '';\n            _speedSelect.appendChild(_option);\n        }\n\n        _speedSelect.value = '1';\n        _speedSettingsSection.appendChild(_speedSelect);\n\n        if (this.options.deeplink) {\n            this._deeplinkButton = document.createElement('div');\n            this._deeplinkButton.classList.add('cinematicjs-video-control-button');\n            this._deeplinkButton.setAttribute('role', 'button');\n            this._deeplinkButton.setAttribute('tabindex', '0');\n            this._deeplinkButton.setAttribute('aria-label', this.options.translations.deeplink);\n            this._deeplinkButton.title = this.options.translations.deeplink;\n            this._deeplinkButton.dataset.copiedText = this.options.translations.deeplinkCopied;\n            Cinematic.renderButtonIcon(this._deeplinkButton, 'deeplink');\n            this._controls.appendChild(this._deeplinkButton);\n        }\n\n        this._cuesContainer = document.createElement('div');\n        this._cuesContainer.classList.add('cinematicjs-video-cues-container', 'cinematicjs-hidden');\n        this._container.appendChild(this._cuesContainer);\n\n        this._cues = document.createElement('div');\n        this._cues.classList.add('video-cues', 'cinematicjs-hidden');\n        this._cuesContainer.appendChild(this._cues);\n\n        this._captionsButton = document.createElement('div');\n        this._captionsButton.classList.add('cinematicjs-video-control-button');\n        this._captionsButton.setAttribute('role', 'button');\n        this._captionsButton.setAttribute('tabindex', '0');\n        this._captionsButton.setAttribute('aria-label', this.options.translations.showSubtitles);\n        this._captionsButton.setAttribute('aria-pressed', 'false');\n        this._captionsButton.title = this.options.translations.showSubtitles;\n        Cinematic.renderButtonIcon(this._captionsButton, 'expanded-cc');\n        this._controls.appendChild(this._captionsButton);\n\n        this.prepareSubtitles();\n\n        if (this.pipEnabled) {\n            this._pipButton = document.createElement('div');\n            this._pipButton.classList.add('cinematicjs-video-control-button');\n            this._pipButton.setAttribute('role', 'button');\n            this._pipButton.setAttribute('tabindex', '0');\n            this._pipButton.setAttribute('aria-label', this.options.translations.pictureInPicture);\n            this._pipButton.title = this.options.translations.pictureInPicture;\n            Cinematic.renderButtonIcon(this._pipButton, 'inpicture');\n            this._controls.appendChild(this._pipButton);\n        }\n\n        this._fullScreenButton = document.createElement('div');\n        this._fullScreenButton.classList.add('cinematicjs-video-control-button', 'cinematicjs-hidden');\n        this._fullScreenButton.setAttribute('role', 'button');\n        this._fullScreenButton.setAttribute('tabindex', '0');\n        this._fullScreenButton.setAttribute('aria-label', this.options.translations.fullscreen);\n        this._fullScreenButton.title = this.options.translations.fullscreen;\n        Cinematic.renderButtonIcon(this._fullScreenButton, 'fullscreen');\n        this._controls.appendChild(this._fullScreenButton);\n    }\n\n    private updateVideoSourceElements(sources: VideoSource[]) {\n        let _previousSource: HTMLSourceElement | null = null;\n        for (const source of sources) {\n            let _source = this._sources.get(source.type);\n            if (_source) {\n                // Update the existing source element\n                _source.src = source.source;\n                _previousSource = _source;\n                return;\n            }\n\n            // Create a new source element.\n            _source = document.createElement('source');\n            _source.src = source.source;\n            _source.type = source.type;\n            this._sources.set(source.type, _source);\n\n            if (_previousSource) {\n                // Insert the new source element after the previous one.\n                _previousSource.insertAdjacentElement('afterend', _source);\n            } else {\n                // Insert the first source element at the beginning of the video element.\n                this._video.insertBefore(_source, this._video.firstChild);\n            }\n\n            _previousSource = _source;\n        }\n\n        // Remove all source elements that are not contained in the new sources array.\n        this._sources.forEach((_source, type) => {\n            if (!sources.some(source => source.type === type)) {\n                _source.remove();\n                this._sources.delete(type);\n            }\n        });\n    }\n\n    private renderQualityOptions() {\n        this._qualitySelect.textContent = '';\n\n        if (this.playlist.getCurrentVideo().sources.length > 1) {\n            for (const source of this.playlist.getCurrentVideo().sources) {\n                const _option = document.createElement('option');\n                _option.textContent = source.quality;\n                _option.value = source.quality;\n                this._qualitySelect.appendChild(_option);\n            }\n\n            this._qualitySelect.value = this.quality;\n            this._qualitySettingsSection.classList.remove('cinematicjs-hidden');\n        } else {\n            this._qualitySettingsSection.classList.add('cinematicjs-hidden');\n        }\n    }\n\n    /**\n     * Falls back to the best available quality for the current video when it does not provide the given quality.\n     *\n     * @param newQuality the preferred quality to play\n     * @private\n     */\n    private handleVideoQualityFallback(newQuality: string) {\n        if (!newQuality) {\n            return newQuality;\n        }\n\n        let currentVideo = this.playlist.getCurrentVideo();\n        let newSource = currentVideo.getSourcesForQuality(newQuality);\n        if (!newSource) {\n            newQuality = currentVideo.getBestAvailableQuality();\n        }\n\n        return newQuality;\n    }\n\n    private handleQualityChange(newQuality: string) {\n        if (!newQuality) {\n            return;\n        }\n\n        newQuality = this.handleVideoQualityFallback(newQuality);\n        let newSource = this.playlist.getCurrentVideo().getSourcesForQuality(newQuality);\n        if (!newSource) {\n            return;\n        }\n\n        if (this.options.rememberQuality) {\n            this.writeToLocalStore('quality', newQuality);\n        }\n\n        const currentTime = this._video.currentTime;\n        const wasPlaying = !this._video.paused;\n\n        this.updateVideoSourceElements(newSource.sources);\n\n        this._video.load();\n        this._video.currentTime = currentTime;\n        this._video.playbackRate = this.speed;\n        if (wasPlaying) {\n            this._video.play();\n        }\n        this.quality = newQuality;\n    }\n\n    private handleSpeedChange(newSpeed: string | number) {\n        if (!newSpeed) {\n            return;\n        }\n        this.speed = typeof newSpeed === 'string' ? Number.parseFloat(newSpeed) : newSpeed;\n        this._video.playbackRate = this.speed;\n    }\n\n    private handleVideoInfoToggle() {\n        this._videoDescription.classList.toggle('cinematicjs-hidden');\n        const isHidden = this._videoDescription.classList.contains('cinematicjs-hidden');\n        if (isHidden) {\n            this._videoInfoButton.title = this.options.translations.showVideoInfo;\n            this._videoInfoButton.setAttribute('aria-label', this.options.translations.showVideoInfo);\n            this._videoInfoButton.setAttribute('aria-expanded', 'false');\n        } else {\n            this._videoInfoButton.title = this.options.translations.hideVideoInfo;\n            this._videoInfoButton.setAttribute('aria-label', this.options.translations.hideVideoInfo);\n            this._videoInfoButton.setAttribute('aria-expanded', 'true');\n        }\n    }\n\n    private prepareSubtitles() {\n        let _oldTrack = this._video.querySelector('track');\n        if (_oldTrack) {\n            _oldTrack.remove();\n            this._captionsButton.classList.add('cinematicjs-hidden');\n        }\n\n        let video = this.playlist.getCurrentVideo();\n        if (!video.subtitles) {\n            this._cues.classList.add('cinematicjs-hidden');\n            this._captionsButton.classList.add('cinematicjs-hidden');\n            this.tracks = null;\n            this.cues = null;\n            return;\n        }\n\n        const _subtitles = document.createElement('track');\n        _subtitles.label = 'subtitles';\n        _subtitles.kind = 'subtitles';\n        _subtitles.src = video.subtitles;\n        _subtitles.default = true;\n        this._video.appendChild(_subtitles);\n\n        if (_subtitles.readyState === 2) {\n            this.handleLoadedTrack();\n        } else {\n            _subtitles.addEventListener('load', () => this.handleLoadedTrack());\n        }\n\n        this._captionsButton.classList.remove('cinematicjs-hidden');\n    }\n\n    private handleLoadedTrack() {\n        this.tracks = this._video.textTracks[0];\n        this.tracks.mode = 'hidden';\n        this.cues = this.tracks.cues;\n\n        const me = this;\n        const onCueEnter = function (this: any) {\n            me._cues.textContent = this.text;\n            me._cues.classList.remove('cinematicjs-hidden');\n        };\n\n        const onCueExit = function () {\n            me._cues.textContent = '';\n            me._cues.classList.add('cinematicjs-hidden');\n        };\n\n        if (this.cues) {\n            for (let i = 0; i < this.cues.length; i++) {\n                let cue = this.cues[i];\n                cue.onenter = onCueEnter;\n                cue.onexit = onCueExit;\n            }\n        }\n    }\n\n    setupEvents() {\n        const me = this;\n\n        // Helper function to add both click and keyboard support to buttons\n        const addButtonHandler = (button: HTMLElement, handler: (event?: Event) => void) => {\n            button.addEventListener('click', (e) => handler(e));\n            button.addEventListener('keydown', (e: KeyboardEvent) => {\n                if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    handler(e);\n                }\n            });\n        };\n\n        window.addEventListener('resize', () => this.handlePlayerResize());\n        this.handlePlayerResize();\n\n        if (globalThis.ResizeObserver) {\n            new ResizeObserver(() => this.handlePlayerResize()).observe(this._container);\n        }\n\n        addButtonHandler(this._playButton, () => {\n            if (this._video.ended) {\n                this.playlist.resetToBeginning();\n                this.handleVideoChange();\n            } else if (this._video.paused) {\n                this._video.play();\n            } else {\n                this._video.pause();\n            }\n        });\n\n        addButtonHandler(this._volumeButton, () => {\n            this._video.muted = !this._video.muted;\n        });\n\n        // Settings button handler\n        addButtonHandler(this._settingsButton, (event) => {\n            this._settingsWrapper.classList.toggle('cinematicjs-dropdown-active');\n            const isExpanded = this._settingsWrapper.classList.contains('cinematicjs-dropdown-active');\n            this._settingsButton.setAttribute('aria-expanded', isExpanded.toString());\n            if (event) {\n                event.stopPropagation();\n            }\n        });\n\n        this._volumeSlider.addEventListener('change', () => {\n            // To allow the user to change from mute to a specific volume via the slider.\n            this._video.muted = false;\n            this._video.volume = this.volume = Number.parseFloat(this._volumeSlider.value);\n        });\n\n        this._video.addEventListener('loadedmetadata', function () {\n            me.totalSeconds = this.duration;\n            me._progressBar.setAttribute('max', me.totalSeconds.toString());\n            me._bufferBar.setAttribute('max', me.totalSeconds.toString());\n            me.updateTimer();\n\n            if (me.options.startTime > 0) {\n                this.currentTime = me.options.startTime;\n            }\n\n            me.fullScreenEnabled = document.fullscreenEnabled || document.webkitFullscreenEnabled || me._video.webkitSupportsFullscreen;\n            me._fullScreenButton.classList.toggle('cinematicjs-hidden', !me.fullScreenEnabled);\n        });\n\n        this._video.addEventListener('timeupdate', function () {\n            me.playedSeconds = this.currentTime;\n            me._progressBar.value = me.playedSeconds;\n\n            // Update aria-valuenow for accessibility\n            const percentage = me.totalSeconds > 0 ? Math.round((me.playedSeconds / me.totalSeconds) * 100) : 0;\n            me._progressBar.setAttribute('aria-valuenow', percentage.toString());\n\n            me.updateTimer();\n        });\n\n        this._video.addEventListener('volumechange', () => {\n            if (this.options.rememberVolume) {\n                this.writeToLocalStore('volume', this._video.volume.toString());\n                this.writeToLocalStore('muted', String(this._video.muted));\n            }\n\n            if (this._video.muted) {\n                // Set the volume slider to its min value to indicate the mute.\n                this._volumeSlider.value = '0';\n                Cinematic.switchButtonIcon(this._volumeButton, 'mute');\n                this._volumeButton.title = this.options.translations.unmute;\n                this._volumeButton.setAttribute('aria-label', this.options.translations.unmute);\n            } else {\n                this._volumeSlider.value = this._video.volume.toString();\n                this._volumeButton.title = this.options.translations.mute;\n                this._volumeButton.setAttribute('aria-label', this.options.translations.mute);\n                if (this.volume > 0.5) {\n                    Cinematic.switchButtonIcon(this._volumeButton, 'sound');\n                } else {\n                    Cinematic.switchButtonIcon(this._volumeButton, 'low');\n                }\n            }\n        });\n\n        this._video.addEventListener('play', () => {\n            Cinematic.switchButtonIcon(me._playButton, 'pause');\n            me._playButton.title = me.options.translations.pause;\n            me._playButton.setAttribute('aria-label', me.options.translations.pause);\n            me._video.focus();\n\n            // Shows the timer even when the video container is invisible during initialization of the player\n            this.handlePlayerResize();\n        });\n\n        this._video.addEventListener('pause', function () {\n            Cinematic.switchButtonIcon(me._playButton, 'play');\n            me._playButton.title = me.options.translations.play;\n            me._playButton.setAttribute('aria-label', me.options.translations.play);\n        });\n\n        this._video.addEventListener('ended', () => {\n            if (this.playlist.shouldPlayNextVideo()) {\n                this.playlist.startNextVideo();\n                this.handleVideoChange();\n            } else {\n                Cinematic.switchButtonIcon(this._playButton, 'repeat');\n                this._playButton.title = me.options.translations.restart;\n                this._playButton.setAttribute('aria-label', me.options.translations.restart);\n                this.showControls();\n            }\n        });\n\n        this._video.addEventListener('progress', function () {\n            if (this.duration > 0) {\n                for (let i = 0; i < this.buffered.length; i++) {\n                    const bufferRangeIndex = this.buffered.length - 1 - i;\n                    const bufferStart = this.buffered.start(bufferRangeIndex);\n                    const bufferEnd = this.buffered.end(bufferRangeIndex);\n                    if (bufferStart <= this.currentTime) {\n                        me._bufferBar.value = (bufferEnd / this.duration) * 100;\n                        break;\n                    }\n                }\n            }\n        });\n\n        this._video.addEventListener('click', () => {\n            globalThis.setTimeout(() => {\n                if (this._video.ended) {\n                    this.playlist.resetToBeginning();\n                    this.handleVideoChange();\n                    this.showOverlay('play', null, true);\n                } else if (me._video.paused) {\n                    me._video.play();\n                    this.showOverlay('play', null, true);\n                } else {\n                    me._video.pause();\n                    this.showOverlay('pause', null, true);\n                }\n                this.userActive = true;\n            }, 300);\n        });\n\n        this._video.addEventListener('dblclick', (event) => {\n            if (this.doubleClickTimeout) {\n                clearTimeout(this.doubleClickTimeout);\n            }\n\n            // Get the bounding rectangle of target\n            const rect = this._video.getBoundingClientRect();\n            const thirds = rect.width / 3;\n\n            // Mouse position\n            const x = event.clientX - rect.left;\n\n            if (x <= thirds) {\n                this._video.currentTime -= 10;\n                this.showOverlay('backwards', '- 10s', true);\n            } else if (x <= thirds * 2) {\n                this.toggleFullScreen();\n            } else {\n                this._video.currentTime += 10;\n                this.showOverlay('fastforward', '+ 10s', true);\n            }\n            this.userActive = true;\n        });\n\n        this._container.addEventListener('mousemove', () => this.userActive = true);\n\n        // Show controls when a video element receives focus\n        this._video.addEventListener('focus', () => {\n            this.userActive = true;\n            this.showControls();\n        });\n\n        // Keep controls visible when keyboard navigating through them\n        this._controls.addEventListener('focusin', () => {\n            this.userActive = true;\n            this.showControls();\n        });\n\n        this._progressBar.addEventListener('focus', () => {\n            this.userActive = true;\n            this.showControls();\n        });\n\n        this.userActiveCheck = globalThis.setInterval(() => {\n            if (!this.userActive) {\n                return;\n            }\n\n            this.userActive = false;\n\n            this.showControls();\n\n            clearTimeout(this.userInactiveTimeout);\n\n            this.userInactiveTimeout = globalThis.setTimeout(() => {\n                // Check if any control element has focus\n                const _activeElement = document.activeElement;\n                const hasControlFocus = _activeElement && (\n                    _activeElement.parentElement == this._controls ||\n                    _activeElement == this._progressBar ||\n                    _activeElement == this._volumeSlider ||\n                    this._controls.contains(_activeElement as Node)\n                );\n\n                // We don't want to hide the controls when:\n                // - The settings popup is currently open/visible\n                // - Any control element has keyboard focus\n                if (!this.userActive && !this._settingsWrapper.classList.contains('cinematicjs-dropdown-active') && !hasControlFocus) {\n                    this.hideControls();\n\n                    if (_activeElement && _activeElement.parentElement == this._controls) {\n                        // We put focus on the video element so hotkeys work again after a control bar button is pressed\n                        // and the user is inactive again.\n                        this._video.focus();\n                    }\n                }\n            }, 2000);\n\n\n        }, 250);\n\n        this._progressBar.addEventListener('click', function (event) {\n            const target = event.target as HTMLElement;\n            const rect = target.getBoundingClientRect();\n            const pos = (event.clientX - rect.left) / this.offsetWidth;\n            me._video.currentTime = pos * me._video.duration;\n        });\n\n        addButtonHandler(this._fullScreenButton, () => me.toggleFullScreen());\n\n        document.addEventListener('fullscreenchange', () => this.handleFullScreenChange());\n        document.addEventListener('webkitfullscreenchange', () => this.handleFullScreenChange());\n\n        if (this.options.deeplink) {\n            addButtonHandler(this._deeplinkButton, () => {\n                if (!this.options.deeplinkCallback || this.options.deeplinkCallback.call(this)) {\n                    me.copyToClipboard(me.options.deeplink, me._deeplinkButton);\n                }\n            });\n        }\n\n        addButtonHandler(this._captionsButton, () => {\n            me._cuesContainer.classList.toggle('cinematicjs-hidden');\n            if (me.captionsEnabled) {\n                me._captionsButton.title = me.options.translations.showSubtitles;\n                me._captionsButton.setAttribute('aria-label', me.options.translations.showSubtitles);\n                me._captionsButton.setAttribute('aria-pressed', 'false');\n                Cinematic.switchButtonIcon(me._captionsButton, 'expanded-cc');\n            } else {\n                me._captionsButton.title = me.options.translations.hideSubtitles;\n                me._captionsButton.setAttribute('aria-label', me.options.translations.hideSubtitles);\n                me._captionsButton.setAttribute('aria-pressed', 'true');\n                Cinematic.switchButtonIcon(me._captionsButton, 'cc');\n            }\n            me.captionsEnabled = !me.captionsEnabled;\n        });\n\n        if (this.pipEnabled) {\n            addButtonHandler(this._pipButton, async () => {\n                try {\n                    if (this._video === document.pictureInPictureElement) {\n                        await document.exitPictureInPicture();\n                    } else {\n                        await this._video.requestPictureInPicture();\n                    }\n                } catch (error) {\n                    console.error(error)\n                }\n            });\n        }\n\n        if (this.options.closeCallback) {\n            addButtonHandler(this._closeButton, () => {\n                if (this.isFullScreen()) {\n                    this.toggleFullScreen();\n                }\n                this.options.closeCallback?.apply(this);\n            });\n        }\n\n        // Add keyboard handler for video info button\n        addButtonHandler(this._videoInfoButton, () => this.handleVideoInfoToggle());\n\n        // Add keyboard handler for chromecast button\n        addButtonHandler(this._chromecastButton, () => {\n            if (this._video.remote) {\n                this._video.remote.prompt();\n            }\n        });\n\n        this._video.addEventListener('keydown', event => {\n            const {key} = event;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            switch (key) {\n                // Space bar allows pausing/resume the video\n                case ' ':\n                case 'Spacebar':\n                    this.userActive = true;\n                    if (this._video.paused) {\n                        this._video.play();\n                        this.showOverlay('play', null, true);\n                    } else {\n                        this._video.pause();\n                        this.showOverlay('pause', null, true);\n                    }\n                    break;\n                // Escape leaves the fullscreen when currently enabled\n                case 'Escape':\n                    this.userActive = true;\n                    if (this.fullScreenEnabled && this.isFullScreen()) {\n                        this.toggleFullScreen();\n                    }\n                    break;\n                // Left Arrow skips 10 seconds into the past\n                case 'ArrowLeft':\n                case 'Left':\n                    this.userActive = true;\n                    this._video.currentTime -= 10;\n                    this.showOverlay('backwards', '- 10s', true);\n                    break;\n                // Right Arrow skips 10 seconds into the future\n                case 'ArrowRight':\n                case 'Right':\n                    this.userActive = true;\n                    this._video.currentTime += 10;\n                    this.showOverlay('fastforward', '+ 10s', true);\n                    break;\n                // Down Arrow decreases the volume by 5%\n                case 'ArrowDown':\n                case 'Down':\n                    this.userActive = true;\n                    if (this._video.volume > 0) {\n                        let currentVolume = Math.round((this._video.volume + Cinematic.getEpsilon()) * 100);\n                        this.volume = (currentVolume - 5) / 100;\n                        this._video.volume = this.volume;\n                        if (this.volume === 0) {\n                            // Also switch on mute when we reach 0% volume\n                            this._video.muted = true;\n                            this.showOverlay('mute', '0 %', true);\n                        } else {\n                            this.showOverlay('low', Math.round(this.volume * 100) + ' %', true);\n                        }\n                        this._volumeSlider.value = this.volume.toString();\n                    }\n                    break;\n                // Up Arrow increases the volume by 5%\n                case 'ArrowUp':\n                case 'Up':\n                    this.userActive = true;\n                    if (this._video.volume < 1) {\n                        let currentVolume = Math.round((this._video.volume + Cinematic.getEpsilon()) * 100);\n                        this.volume = (currentVolume + 5) / 100;\n                        this._video.volume = this.volume;\n                        // Unmute if we previously were muted\n                        this._video.muted = false;\n                        this.showOverlay('sound', Math.round(this.volume * 100) + ' %', true);\n                        this._volumeSlider.value = this.volume.toString();\n                    }\n                    break;\n            }\n        });\n\n        return true;\n    }\n\n    private handleVideoChange() {\n        this.prepareSubtitles();\n        this.renderQualityOptions();\n        this.handleQualityChange(this.quality);\n        this.handleSpeedChange(this.speed);\n        this.updateDisplayedVideoInfo();\n\n        this._video.currentTime = 0;\n        this._video.play();\n    }\n\n    private updateDisplayedVideoInfo() {\n        const currentVideo = this.playlist.getCurrentVideo();\n        this._video.poster = currentVideo.poster || '';\n        this._videoTitleIcon.src = currentVideo.titleIcon || '';\n        this._videoTitleIcon.classList.toggle('cinematicjs-hidden', this._videoTitleIcon.src.length === 0);\n        this._videoTitle.textContent = currentVideo.title || '';\n        this._videoTitle.classList.toggle('cinematicjs-clickable', !!currentVideo.description);\n        this._videoInfoButton.classList.toggle('cinematicjs-hidden', !currentVideo.description);\n        this._videoDescription.textContent = currentVideo.description || '';\n    }\n\n    private handlePlayerResize() {\n        if (this._container.clientWidth >= 328) {\n            this._timer.classList.remove('cinematicjs-hidden');\n        } else {\n            this._timer.classList.add('cinematicjs-hidden');\n        }\n    }\n\n    private static renderButtonIcon(_button: HTMLDivElement, icon: string) {\n        const _icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        _icon.setAttribute('viewBox', '0 0 24 24');\n        const _use = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n        _use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', '#icon-' + icon);\n        _icon.appendChild(_use);\n        _button.appendChild(_icon);\n    }\n\n    private static switchButtonIcon(_button: HTMLDivElement, newIcon: string) {\n        _button.querySelector('svg use')?.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', '#icon-' + newIcon);\n    }\n\n    private showOverlay(icon: string, text: string | null, hideAutomatically: boolean) {\n        Cinematic.switchButtonIcon(this._overlayIcon, icon);\n        this._overlayText.textContent = text;\n        this._overlayWrapper.classList.remove('cinematicjs-hidden');\n\n        clearTimeout(this.overlayHideTimeout);\n\n        if (hideAutomatically) {\n            this.overlayHideTimeout = globalThis.setTimeout(() => {\n                this._overlayWrapper.classList.add('cinematicjs-hidden');\n            }, 500);\n        }\n    }\n\n    formatTime(seconds: number) {\n        let hourComponent = Math.floor(seconds / 3600);\n        let minuteComponent = Math.floor(seconds / 60 % 60);\n        let secondComponent = Math.floor(seconds % 60);\n\n        let timer = this.toTimerComponent(minuteComponent) + ':' + this.toTimerComponent(secondComponent);\n\n        if (this.totalSeconds >= (60 * 60)) {\n            // Include the hours in both timers when the video is at least an hour long\n            return this.toTimerComponent(hourComponent) + ':' + timer;\n        }\n\n        return timer;\n    }\n\n    toTimerComponent(value: number) {\n        return value < 10 ? '0' + value : value;\n    }\n\n    updateTimer() {\n        this._timer.textContent = this.formatTime(this.playedSeconds) + ' / ' + this.formatTime(this.totalSeconds);\n    }\n\n    writeToLocalStore(name: string, value: string) {\n        try {\n            if (globalThis.localStorage) {\n                globalThis.localStorage.setItem('cinematic-js-' + name, value);\n            }\n        } catch (e) {\n            console.log('CinematicJS: Cannot write to local store', {name: name, value: value, error: e});\n        }\n    }\n\n    readFromLocalStore(name: string): string | null {\n        try {\n            if (globalThis.localStorage) {\n                return globalThis.localStorage.getItem('cinematic-js-' + name);\n            }\n        } catch (e) {\n            console.log('CinematicJS: Cannot read from local store', {name: name, error: e});\n        }\n        return null;\n    }\n\n    toggleFullScreen() {\n        if (document.fullscreenElement) {\n            document.exitFullscreen();\n        } else if (document.webkitFullscreenElement) {\n            // Need this to support Safari\n            document.webkitExitFullscreen();\n        } else if (this._container.webkitRequestFullscreen) {\n            // Need this to support Safari\n            this._container.webkitRequestFullscreen();\n        } else if (this._video.webkitEnterFullscreen) {\n            // Need this to support iOS Safari\n            this._video.webkitEnterFullscreen();\n        } else {\n            this._container.requestFullscreen();\n        }\n    }\n\n    handleFullScreenChange() {\n        if (this.isFullScreen()) {\n            this._container.dataset.fullscreen = true;\n            Cinematic.switchButtonIcon(this._fullScreenButton, 'closefullscreen');\n            this._fullScreenButton.title = this.options.translations.exitFullscreen;\n            this._fullScreenButton.setAttribute('aria-label', this.options.translations.exitFullscreen);\n        } else {\n            this._container.dataset.fullscreen = false;\n            Cinematic.switchButtonIcon(this._fullScreenButton, 'fullscreen');\n            this._fullScreenButton.title = this.options.translations.fullscreen;\n            this._fullScreenButton.setAttribute('aria-label', this.options.translations.fullscreen);\n        }\n    }\n\n    showControls() {\n        this._container.classList.remove('cinematicjs-video-user-inactive');\n        this._uiWrapper.classList.remove('cinematicjs-hidden');\n    }\n\n    hideControls() {\n        if (this._video.paused) {\n            return;\n        }\n\n        this._container.classList.add('cinematicjs-video-user-inactive');\n        this._uiWrapper.classList.add('cinematicjs-hidden');\n    }\n\n    isFullScreen() {\n        return document.fullscreenElement || document.webkitFullscreenElement;\n    }\n\n    copyToClipboard(text: string, _element: HTMLElement) {\n        /*\n         * inspired by clipboard.js v1.5.12\n         * https://zenorocha.github.io/clipboard.js\n         *\n         * Licensed MIT  Zeno Rocha\n         */\n        const fakeElem = document.createElement('textarea');\n        fakeElem.contentEditable = 'true';\n        // Prevent zooming on iOS\n        fakeElem.style.fontSize = '12pt';\n        // Reset box model\n        fakeElem.style.border = '0';\n        fakeElem.style.padding = '0';\n        fakeElem.style.margin = '0';\n        // Move element out of the screen horizontally\n        fakeElem.style.position = 'absolute';\n        fakeElem.style[document.documentElement.getAttribute('dir') == 'rtl' ? 'right' : 'left'] = '-9999px';\n        // Move element to the same position vertically\n        fakeElem.style.top = (window.scrollY || document.documentElement.scrollTop) + 'px';\n        fakeElem.setAttribute('readonly', '');\n        fakeElem.value = text;\n        document.body.appendChild(fakeElem);\n        fakeElem.focus();\n\n        const range = document.createRange();\n        range.selectNodeContents(fakeElem);\n        const selection = globalThis.getSelection();\n        selection?.removeAllRanges();\n        selection?.addRange(range);\n        fakeElem.setSelectionRange(0, text.length);\n\n        if (document.execCommand('copy') && _element !== undefined) {\n            _element.classList.add('cinematicjs-copied');\n            setTimeout(function () {\n                _element.classList.remove('cinematicjs-copied');\n            }, 2000);\n        }\n        fakeElem.remove();\n\n        /* Try alternative */\n        const copy = function (event: ClipboardEvent) {\n            if (event.clipboardData) {\n                event.clipboardData.setData('text/plain', text);\n            } else if ((<any>globalThis).clipboardData) {\n                (<any>globalThis).clipboardData.setData('Text', text);\n            }\n            event.preventDefault();\n        }\n\n        globalThis.addEventListener('copy', copy);\n        document.execCommand('copy');\n        globalThis.removeEventListener('copy', copy);\n    }\n\n    private static getEpsilon(): number {\n        if (Number.EPSILON) {\n            return Number.EPSILON;\n        }\n        let epsilon = 1;\n        while ((1 + 0.5 * epsilon) !== 1) {\n            epsilon *= 0.5;\n        }\n        return epsilon;\n    }\n}\n\nclass CinematicVideo {\n    poster: string;\n    titleIcon: string;\n    title: string;\n    description: string;\n    subtitles: string | null;\n    sources: VideoQuality[];\n\n    constructor(options: VideoOptions) {\n        this.poster = options.poster;\n        this.titleIcon = options.titleIcon;\n        this.title = options.title;\n        this.description = options.description;\n        this.subtitles = options.subtitles;\n        this.sources = options.sources;\n    }\n\n    getSourcesForQuality(quality: string): VideoQuality | null {\n        if (this.sources.length === 1) {\n            return this.sources[0];\n        }\n        for (let source of this.sources) {\n            if (source.quality === quality) {\n                return source;\n            }\n        }\n        return null;\n    }\n\n    getBestAvailableQuality(): string {\n        return this.sources[0].quality;\n    }\n}\n\nclass CinematicPlaylist {\n    loop: boolean;\n    videos: CinematicVideo[];\n    currentVideo: number;\n\n    constructor(loop: boolean, videos: CinematicVideo[]) {\n        this.loop = loop;\n        this.videos = videos;\n        this.currentVideo = 0;\n\n        if (this.videos.length === 0) {\n            throw new Error('CinematicJS: At least one video has to be passed.');\n        }\n    }\n\n    getCurrentVideo(): CinematicVideo {\n        return this.videos[this.currentVideo];\n    }\n\n    shouldPlayNextVideo(): boolean {\n        return this.videos.length > 1 && (this.currentVideo + 1 < this.videos.length || this.loop);\n    }\n\n    startNextVideo() {\n        this.currentVideo++;\n        if (this.loop && this.currentVideo >= this.videos.length) {\n            this.resetToBeginning();\n        }\n    }\n\n    resetToBeginning() {\n        this.currentVideo = 0;\n    }\n}\n"]}